<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="febhouse">
    <typeAlias alias="ye710VO" type="com.ezsign.feb.house.vo.YE710VO"/>

    <select id="ye710DAO.getYE710" parameterClass="ye710VO" resultClass="ye710VO">
        SELECT
          계약ID, 사용자ID, 일련번호,
          주택관련저축_입력여부, 주택관련저축_적용여부, 주택관련저축_가입저축종류, 주택관련저축_세대주여부, 주택관련저축_가입년월일, 주택관련저축_주택소유여부, 주택관련저축_보유주택규모, 주택관련저축_기준시가, 주택관련저축_제출서류_납입영수증, 주택관련저축_제출서류_주민등록표등본, 주택관련저축_제출서류_건물등기부등본, 주택관련저축_제출서류_개별공동주택가격확인서,
          주택임차차입금_입력여부, 주택임차차입금_적용여부, 주택임차차입금_주택소유여부, 주택임차차입금_세대주여부, 주택임차차입금_세대주공제여부, 주택임차차입금_차입대상여부, 주택임차차입금_이자율, 주택임차차입금_임차주택규모, 주택임차차입금_임차년월일, 주택임차차입금_차입년월일, 주택임차차입금_입금자, 주택임차차입금_임대차_연장갱신, 주택임차차입금_임대차_연장갱신일, 주택임차차입금_임대차_차입일, 주택임차차입금_다른전세주택이사, 주택임차차입금_다른전세주택이사_입주전입일, 주택임차차입금_다른전세주택이사_차입일, 주택임차차입금_제출서류_은행차입_상환증명서, 주택임차차입금_제출서류_은행차입_주민등록표등본, 주택임차차입금_제출서류_은행차입_입대차계약서, 주택임차차입금_제출서류_개인차입_월세, 주택임차차입금_제출서류_개인차입_주민등록표등본, 주택임차차입금_제출서류_개인차입_임대차계약증서, 주택임차차입금_제출서류_개인차입_금전소비대차계약서사본, 주택임차차입금_제출서류_개인차입_계좌이체영수증,
          장기주택저당차입금_입력여부, 장기주택저당차입금_적용여부, 장기주택저당차입금_세대주여부, 장기주택저당차입금_세대주공제여부, 장기주택저당차입금_거주여부, 장기주택저당차입금_소유권등기일, 장기주택저당차입금_차입금상환기간, 장기주택저당차입금_차입시기, 장기주택저당차입금_보유주택규모, 장기주택저당차입금_보유주택수, 장기주택저당차입금_기준시가, 장기주택저당차입금_특례경우, 장기주택저당차입금_연장전환경우, 장기주택저당차입금_제출서류_상환증명서, 장기주택저당차입금_제출서류_주민등록표등본, 장기주택저당차입금_제출서류_건물등기부등본, 장기주택저당차입금_제출서류_개별공동주택가격확인서, 장기주택저당차입금_제출서류_증액전이자계산액,
          월세공제_입력여부, 월세공제_적용여부, 월세공제_주택소유여부, 월세공제_세대주여부, 월세공제_세대주공제여부, 월세공제_거주여부, 월세공제_계약자, 월세공제_주택규모, 월세공제_임차년월일, 월세공제_월세지급일, 월세공제_월임대료, 월세공제_계약요건변동여부, 월세공제_제출서류_월세, 월세공제_제출서류_주민등록표등본, 월세공제_제출서류_임대차계약서사본, 월세공제_제출서류_월세납입영수증,
          주택설문지_동의여부, 주택설문지_작성년월일, 주택설문지_작성자명,
          등록일시, 수정일시
        FROM tbl_ye710
        WHERE 계약ID = #계약ID#
          AND 사용자ID = #사용자ID#
          AND 사용여부 = '1'
    </select>

    <insert id="ye710DAO.insYE710" parameterClass="ye710VO">
        <selectKey resultClass="java.lang.String" keyProperty="일련번호">
            SELECT IFNULL(MAX(일련번호 + 1), 1)
            FROM tbl_ye710
        </selectKey>
        INSERT INTO tbl_ye710 (
          계약ID, 사용자ID, 일련번호,
          주택관련저축_입력여부, 주택관련저축_적용여부, 주택관련저축_가입저축종류, 주택관련저축_세대주여부, 주택관련저축_가입년월일, 주택관련저축_주택소유여부, 주택관련저축_보유주택규모, 주택관련저축_기준시가, 주택관련저축_제출서류_납입영수증, 주택관련저축_제출서류_주민등록표등본, 주택관련저축_제출서류_건물등기부등본, 주택관련저축_제출서류_개별공동주택가격확인서,
          주택임차차입금_입력여부, 주택임차차입금_적용여부, 주택임차차입금_주택소유여부, 주택임차차입금_세대주여부, 주택임차차입금_세대주공제여부, 주택임차차입금_차입대상여부, 주택임차차입금_이자율, 주택임차차입금_임차주택규모, 주택임차차입금_임차년월일, 주택임차차입금_차입년월일, 주택임차차입금_입금자, 주택임차차입금_임대차_연장갱신, 주택임차차입금_임대차_연장갱신일, 주택임차차입금_임대차_차입일, 주택임차차입금_다른전세주택이사, 주택임차차입금_다른전세주택이사_입주전입일, 주택임차차입금_다른전세주택이사_차입일, 주택임차차입금_제출서류_은행차입_상환증명서, 주택임차차입금_제출서류_은행차입_주민등록표등본, 주택임차차입금_제출서류_은행차입_입대차계약서, 주택임차차입금_제출서류_개인차입_월세, 주택임차차입금_제출서류_개인차입_주민등록표등본, 주택임차차입금_제출서류_개인차입_임대차계약증서, 주택임차차입금_제출서류_개인차입_금전소비대차계약서사본, 주택임차차입금_제출서류_개인차입_계좌이체영수증,
          장기주택저당차입금_입력여부, 장기주택저당차입금_적용여부, 장기주택저당차입금_세대주여부, 장기주택저당차입금_세대주공제여부, 장기주택저당차입금_거주여부, 장기주택저당차입금_소유권등기일, 장기주택저당차입금_차입금상환기간, 장기주택저당차입금_차입시기, 장기주택저당차입금_보유주택규모, 장기주택저당차입금_보유주택수, 장기주택저당차입금_기준시가, 장기주택저당차입금_특례경우, 장기주택저당차입금_연장전환경우, 장기주택저당차입금_제출서류_상환증명서, 장기주택저당차입금_제출서류_주민등록표등본, 장기주택저당차입금_제출서류_건물등기부등본, 장기주택저당차입금_제출서류_개별공동주택가격확인서, 장기주택저당차입금_제출서류_증액전이자계산액,
          월세공제_입력여부, 월세공제_적용여부, 월세공제_주택소유여부, 월세공제_세대주여부, 월세공제_세대주공제여부, 월세공제_거주여부, 월세공제_계약자, 월세공제_주택규모, 월세공제_임차년월일, 월세공제_월세지급일, 월세공제_월임대료, 월세공제_계약요건변동여부, 월세공제_제출서류_월세, 월세공제_제출서류_주민등록표등본, 월세공제_제출서류_임대차계약서사본, 월세공제_제출서류_월세납입영수증,
          주택설문지_동의여부, 주택설문지_작성년월일, 주택설문지_작성자명,
          사용여부, 등록일시, 수정일시
        ) VALUES (
          #계약ID#, #사용자ID#, #일련번호#,
          #주택관련저축_입력여부#, #주택관련저축_적용여부#, #주택관련저축_가입저축종류#, #주택관련저축_세대주여부#, #주택관련저축_가입년월일#, #주택관련저축_주택소유여부#, #주택관련저축_보유주택규모#, #주택관련저축_기준시가#, #주택관련저축_제출서류_납입영수증#, #주택관련저축_제출서류_주민등록표등본#, #주택관련저축_제출서류_건물등기부등본#, #주택관련저축_제출서류_개별공동주택가격확인서#,
          #주택임차차입금_입력여부#, #주택임차차입금_적용여부#, #주택임차차입금_주택소유여부#, #주택임차차입금_세대주여부#, #주택임차차입금_세대주공제여부#, #주택임차차입금_차입대상여부#, #주택임차차입금_이자율#, #주택임차차입금_임차주택규모#, REPLACE(#주택임차차입금_임차년월일#, '-', ''), REPLACE(#주택임차차입금_차입년월일#, '-', ''), #주택임차차입금_입금자#, #주택임차차입금_임대차_연장갱신#, REPLACE(#주택임차차입금_임대차_연장갱신일#, '-', ''), REPLACE(#주택임차차입금_임대차_차입일#, '-', ''), #주택임차차입금_다른전세주택이사#, REPLACE(#주택임차차입금_다른전세주택이사_입주전입일#, '-', ''), REPLACE(#주택임차차입금_다른전세주택이사_차입일#, '-', ''), #주택임차차입금_제출서류_은행차입_상환증명서#, #주택임차차입금_제출서류_은행차입_주민등록표등본#, #주택임차차입금_제출서류_은행차입_입대차계약서#, #주택임차차입금_제출서류_개인차입_월세#, #주택임차차입금_제출서류_개인차입_주민등록표등본#, #주택임차차입금_제출서류_개인차입_임대차계약증서#, #주택임차차입금_제출서류_개인차입_금전소비대차계약서사본#, #주택임차차입금_제출서류_개인차입_계좌이체영수증#,
          #장기주택저당차입금_입력여부#, #장기주택저당차입금_적용여부#, #장기주택저당차입금_세대주여부#, #장기주택저당차입금_세대주공제여부#, #장기주택저당차입금_거주여부#, REPLACE(#장기주택저당차입금_소유권등기일#, '-', ''), REPLACE(#장기주택저당차입금_차입금상환기간#, '-', ''), #장기주택저당차입금_차입시기#, #장기주택저당차입금_보유주택규모#, #장기주택저당차입금_보유주택수#, #장기주택저당차입금_기준시가#, #장기주택저당차입금_특례경우#, #장기주택저당차입금_연장전환경우#, #장기주택저당차입금_제출서류_상환증명서#, #장기주택저당차입금_제출서류_주민등록표등본#, #장기주택저당차입금_제출서류_건물등기부등본#, #장기주택저당차입금_제출서류_개별공동주택가격확인서#, #장기주택저당차입금_제출서류_증액전이자계산액#,
          #월세공제_입력여부#, #월세공제_적용여부#, #월세공제_주택소유여부#, #월세공제_세대주여부#, #월세공제_세대주공제여부#, #월세공제_거주여부#, #월세공제_계약자#, #월세공제_주택규모#, REPLACE(#월세공제_임차년월일#, '-', ''), REPLACE(#월세공제_월세지급일#, '-', ''), (REPLACE(#월세공제_월임대료#, ',', '') + 0), #월세공제_계약요건변동여부#, #월세공제_제출서류_월세#, #월세공제_제출서류_주민등록표등본#, #월세공제_제출서류_임대차계약서사본#, #월세공제_제출서류_월세납입영수증#,
          #주택설문지_동의여부#, REPLACE(#주택설문지_작성년월일#, '-', ''), #주택설문지_작성자명#,
          '1', DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s'), DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s')
        )
    </insert>

    <!-- 일련번호 없이 단건으로 처리 -->
    <update id="ye710DAO.updYE710Disable" parameterClass="ye710VO">
        UPDATE tbl_ye710
        SET
          사용여부 = '0',
          수정일시 = DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s')
        WHERE 계약ID = #계약ID#
          AND 사용자ID = #사용자ID#
          AND 사용여부 = '1'
    </update>
</sqlMap>